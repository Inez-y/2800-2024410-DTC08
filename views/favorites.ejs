<%- include("templates/htmlDocHeader") %>
<%- include("templates/header") %>

<%- include("templates/htmlDocHeader") %>
<%- include("templates/header") %>

<div class="p-4 m-10 rounded-3xl bg-white">
    <div class="p-2 m-2 text-left text-lg text-buttongreen">
        <button id="chatlogHistoryEditButton"> Edit </button>
    </div>
    <div class="">
        <p class="text-left text-4xl p-2 m-2 font-bold"> Favourites </p>
        <button class="p-2 m-10 rounded-full bg-gray-400 text-white" id="sortByButton">
            Sort By </button>
    </div>

    <div class="flex justify-center">
        <button class="px-3 m-2 rounded-full bg-buttongreen text-white" id="myCookbookButton">
            My Cookbook </button>
        <button class="px-3 m-2 rounded-full bg-buttongreen text-white" id="myIngredientsButton"> My
            Ingredients
        </button>
    </div>

    <div class="flex flex-col" id="chatlogHistoryList">
        <div class="p-4 m-1 rounded-3xl bg-gray-400 bg-opacity-90">
            <p> img </p>
            <p> list 1 </p>
            <p> date </p>
        </div>
        <div class="p-4 m-1 rounded-3xl bg-buttongreen bg-opacity-90">
            <p> img </p>
            <p> list 2 </p>
            <p> date </p>
        </div>
        <div class="p-4 m-1 rounded-3xl bg-gray-400 bg-opacity-90">
            <p> img </p>
            <p> list 3 </p>
            <p> date </p>
        </div>
        <div class="p-4 m-1 rounded-3xl bg-buttongreen bg-opacity-90">
            <p> img </p>
            <p> list 4 </p>
            <p> date </p>
        </div>
    </div>


</div>
<%- include("templates/footer") %>

<%- include("templates/footer") %>

<script>
    const favoritesList = document.getElementById('favorites-list');

    function renderFavorites() {
        favoritesList.innerHTML = '';
        const recipes = JSON.parse(localStorage.getItem('recipes')) || [];
        recipes.forEach((recipe, index) => {
            const li = document.createElement('li');
            li.className = 'bg-white shadow-md rounded mb-4 p-4 flex flex-col justify-between items-start';
            li.innerHTML = `
                    <div>
                        <h3 class="text-gray-700 font-bold">${recipe.title}</h3>
                        <pre class="text-gray-700 whitespace-pre-wrap">${recipe.content}</pre>
                    </div>
                    <button class="delete-recipe bg-red-400 hover:bg-red-500 text-white font-bold py-2 px-4 rounded mt-4 self-end focus:outline-none focus:shadow-outline" data-index="${index}">
                        Delete
                    </button>
                `;
            favoritesList.appendChild(li);
        });

        document.querySelectorAll('.delete-recipe').forEach(button => {
            button.addEventListener('click', deleteRecipe);
        });
    }

    function deleteRecipe(event) {
        const index = event.target.getAttribute('data-index');
        let recipes = JSON.parse(localStorage.getItem('recipes')) || [];
        recipes.splice(index, 1);
        localStorage.setItem('recipes', JSON.stringify(recipes));
        renderFavorites();
    }

    // Initial render
    renderFavorites();
</script>
</body>

</html>