<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favorites - ReciPT</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <%- include("templates/header") %>

    <main class="flex flex-col items-center justify-center h-screen">
        <div class="w-full max-w-xs">
            <h2 class="block text-gray-700 text-lg font-bold mb-4">Favorite Recipes</h2>
            <ul id="favorites-list" class="mb-4">
                <!-- Favorite recipes will be dynamically added here -->
            </ul>
        </div>
    </main>

    <%- include("templates/footer") %>

    <script>
        const favoritesList = document.getElementById('favorites-list');

        function renderFavorites() {
            favoritesList.innerHTML = '';
            const recipes = JSON.parse(localStorage.getItem('recipes')) || [];
            recipes.forEach((recipe, index) => {
                const li = document.createElement('li');
                li.className = 'bg-white shadow-md rounded mb-4 p-4 flex flex-col justify-between items-start';
                li.innerHTML = `
                    <div>
                        <h3 class="text-gray-700 font-bold">${recipe.title}</h3>
                        <pre class="text-gray-700 whitespace-pre-wrap">${recipe.content}</pre>
                    </div>
                    <button class="delete-recipe bg-red-400 hover:bg-red-500 text-white font-bold py-2 px-4 rounded mt-4 self-end focus:outline-none focus:shadow-outline" data-index="${index}">
                        Delete
                    </button>
                `;
                favoritesList.appendChild(li);
            });

            document.querySelectorAll('.delete-recipe').forEach(button => {
                button.addEventListener('click', deleteRecipe);
            });
        }

        function deleteRecipe(event) {
            const index = event.target.getAttribute('data-index');
            let recipes = JSON.parse(localStorage.getItem('recipes')) || [];
            recipes.splice(index, 1);
            localStorage.setItem('recipes', JSON.stringify(recipes));
            renderFavorites();
        }

        // Initial render
        renderFavorites();
    </script>
</body>
</html>
